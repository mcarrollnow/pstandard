<script>
document.addEventListener('DOMContentLoaded', function() {
  // Get references to all form fields
  const qtyField = document.getElementById('QTY1');
  const costField = document.getElementById('COST1');
  const totalField = document.getElementById('TOTAL1');
  
  // Function to handle calculations
  function updateCalculations(changedFieldId) {
    // Get current values
    let qty = parseFloat(qtyField.value) || 0;
    let cost = parseFloat(costField.value) || 0;
    let total = parseFloat(totalField.value) || 0;
    
    // Determine which field was changed and update others accordingly
    if (changedFieldId === 'QTY1') {
      // If quantity was changed, update total
      total = qty * cost;
      totalField.value = total.toFixed(2);
    } 
    else if (changedFieldId === 'COST1') {
      // If cost was changed, update total
      total = qty * cost;
      totalField.value = total.toFixed(2);
    } 
    else if (changedFieldId === 'TOTAL1') {
      // If total was changed, update cost (if qty is not zero)
      if (qty !== 0) {
        cost = total / qty;
        costField.value = cost.toFixed(2);
      }
      // If qty is zero and total is not, update qty (if cost is not zero)
      else if (cost !== 0 && total !== 0) {
        qty = total / cost;
        qtyField.value = qty.toFixed(2);
      }
    }
  }
  
  // Add event listeners to all fields
  if (qtyField) {
    qtyField.addEventListener('input', function() {
      updateCalculations('QTY1');
    });
  }
  
  if (costField) {
    costField.addEventListener('input', function() {
      updateCalculations('COST1');
    });
  }
  
  if (totalField) {
    totalField.addEventListener('input', function() {
      updateCalculations('TOTAL1');
    });
  }
});
</script>
